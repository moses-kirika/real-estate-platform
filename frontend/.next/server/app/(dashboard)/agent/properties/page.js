(()=>{var e={};e.id=8942,e.ids=[8942],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},10502:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),a(1158),a(10578),a(12874),a(41163);var r=a(27105),s=a(15265),l=a(90157),n=a.n(l),i=a(44665),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["(dashboard)",{children:["agent",{children:["properties",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1158)),"C:\\Users\\kirika\\.gemini\\antigravity\\scratch\\real-estate-platform\\frontend\\app\\(dashboard)\\agent\\properties\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,10578)),"C:\\Users\\kirika\\.gemini\\antigravity\\scratch\\real-estate-platform\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,12874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,41163)),"C:\\Users\\kirika\\.gemini\\antigravity\\scratch\\real-estate-platform\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,12874,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,97418))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\kirika\\.gemini\\antigravity\\scratch\\real-estate-platform\\frontend\\app\\(dashboard)\\agent\\properties\\page.tsx"],u="/(dashboard)/agent/properties/page",p={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/agent/properties/page",pathname:"/agent/properties",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},71968:(e,t,a)=>{let r={"675446e0e49d0fd64ba83fd62071323d39a5833f":()=>Promise.resolve().then(a.bind(a,28629)).then(e=>e.completePropertyDeal),"8c299936c13335b79ecadd4eef4c4ae4748a42e4":()=>Promise.resolve().then(a.bind(a,28629)).then(e=>e.getAgentAnalytics),"0eb3e6ea3cea093b3dee3a697fc793b554304b77":()=>Promise.resolve().then(a.bind(a,72223)).then(e=>e.register),bcdd3597cdaf7fd331e1f2c845bd1057a22095ed:()=>Promise.resolve().then(a.bind(a,72223)).then(e=>e.authenticate),db47c8c76a3a3c7d90fc08090ec69b98f34a3c1e:()=>Promise.resolve().then(a.bind(a,72223)).then(e=>e.signOutAction)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"675446e0e49d0fd64ba83fd62071323d39a5833f":s.bind(null,"675446e0e49d0fd64ba83fd62071323d39a5833f"),"8c299936c13335b79ecadd4eef4c4ae4748a42e4":s.bind(null,"8c299936c13335b79ecadd4eef4c4ae4748a42e4"),"0eb3e6ea3cea093b3dee3a697fc793b554304b77":s.bind(null,"0eb3e6ea3cea093b3dee3a697fc793b554304b77"),bcdd3597cdaf7fd331e1f2c845bd1057a22095ed:s.bind(null,"bcdd3597cdaf7fd331e1f2c845bd1057a22095ed"),db47c8c76a3a3c7d90fc08090ec69b98f34a3c1e:s.bind(null,"db47c8c76a3a3c7d90fc08090ec69b98f34a3c1e")}},17057:(e,t,a)=>{Promise.resolve().then(a.bind(a,42094)),Promise.resolve().then(a.bind(a,41367)),Promise.resolve().then(a.t.bind(a,50696,23))},42094:(e,t,a)=>{"use strict";a.d(t,{CompleteDealButton:()=>h});var r=a(19899),s=a(5507),l=a(27241),n=a(21775),i=a(16711),o=a(88455);let d=(0,a(61278).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=a(32979);a(89603);var u=a(46351);(0,u.$)("8c299936c13335b79ecadd4eef4c4ae4748a42e4");var p=(0,u.$)("675446e0e49d0fd64ba83fd62071323d39a5833f"),f=a(52759),m=a(12577);function h({propertyId:e,propertyTitle:t,defaultPrice:a}){let[u,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(a.toString()),[v,j]=(0,s.useState)("SALE");async function N(){g(!0);try{let t=new FormData;t.append("propertyId",e),t.append("amount",y),t.append("type",v),await p(t),f.Am.success("Deal completed successfully!"),h(!1)}catch(e){f.Am.error("Failed to complete deal")}finally{g(!1)}}return(0,r.jsxs)(n.Dialog,{open:u,onOpenChange:h,children:[r.jsx(n.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"outline",size:"sm",className:"bg-emerald-50 text-emerald-600 hover:bg-emerald-100 border-emerald-200",children:[r.jsx(d,{className:"h-4 w-4 mr-2"}),"Complete Deal"]})}),(0,r.jsxs)(n.DialogContent,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(n.DialogHeader,{children:[r.jsx(n.DialogTitle,{children:"Complete Deal"}),(0,r.jsxs)(n.Be,{children:["Mark ",r.jsx("b",{children:t})," as sold or rented. This will record the transaction for your analytics."]})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(o.Label,{htmlFor:"type",className:"text-right",children:"Deal Type"}),r.jsx("div",{className:"col-span-3",children:(0,r.jsxs)(m.Ph,{value:v,onValueChange:j,children:[r.jsx(m.i4,{children:r.jsx(m.ki,{placeholder:"Select type"})}),(0,r.jsxs)(m.Bw,{children:[r.jsx(m.Ql,{value:"SALE",children:"Sale"}),r.jsx(m.Ql,{value:"RENT",children:"Rental"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(o.Label,{htmlFor:"amount",className:"text-right",children:"Final Price"}),r.jsx(i.I,{id:"amount",type:"number",value:y,onChange:e=>b(e.target.value),className:"col-span-3"})]})]}),(0,r.jsxs)(n.cN,{children:[r.jsx(l.z,{variant:"outline",onClick:()=>h(!1),disabled:x,children:"Cancel"}),(0,r.jsxs)(l.z,{onClick:N,disabled:x,className:"bg-emerald-600 hover:bg-emerald-700",children:[x&&r.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm Deal"]})]})]})]})}},41367:(e,t,a)=>{"use strict";a.d(t,{DeletePropertyButton:()=>q});var r=a(19899),s=a(27241);let l=(0,a(61278).Z)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var n=a(52759),i=a(76153),o=a(5507),d=a(4076),c=a(29932),u=a(43836),p=a(78762),f=Symbol("radix.slottable"),m="AlertDialog",[h,x]=(0,d.b)(m,[u.p8]),g=(0,u.p8)(),y=e=>{let{__scopeAlertDialog:t,...a}=e,s=g(t);return(0,r.jsx)(u.fC,{...s,...a,modal:!0})};y.displayName=m;var b=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=g(a);return(0,r.jsx)(u.xz,{...l,...s,ref:t})});b.displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:t,...a}=e,s=g(t);return(0,r.jsx)(u.h_,{...s,...a})};v.displayName="AlertDialogPortal";var j=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=g(a);return(0,r.jsx)(u.aV,{...l,...s,ref:t})});j.displayName="AlertDialogOverlay";var N="AlertDialogContent",[w,k]=h(N),A=function(e){let t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=f,t}("AlertDialogContent"),D=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:s,...l}=e,n=g(a),i=o.useRef(null),d=(0,c.e)(t,i),f=o.useRef(null);return(0,r.jsx)(u.jm,{contentName:N,titleName:C,docsSlug:"alert-dialog",children:(0,r.jsx)(w,{scope:a,cancelRef:f,children:(0,r.jsxs)(u.VY,{role:"alertdialog",...n,...l,ref:d,onOpenAutoFocus:(0,p.Mj)(l.onOpenAutoFocus,e=>{e.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(A,{children:s}),(0,r.jsx)(I,{contentRef:i})]})})})});D.displayName=N;var C="AlertDialogTitle",R=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=g(a);return(0,r.jsx)(u.Dx,{...l,...s,ref:t})});R.displayName=C;var P="AlertDialogDescription",_=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=g(a);return(0,r.jsx)(u.dk,{...l,...s,ref:t})});_.displayName=P;var z=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,l=g(a);return(0,r.jsx)(u.x8,{...l,...s,ref:t})});z.displayName="AlertDialogAction";var E="AlertDialogCancel",S=o.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:l}=k(E,a),n=g(a),i=(0,c.e)(t,l);return(0,r.jsx)(u.x8,{...n,...s,ref:i})});S.displayName=E;var I=({contentRef:e})=>{let t=`\`${N}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${N}\` by passing a \`${P}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${N}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},T=a(66409);let M=o.forwardRef(({className:e,...t},a)=>r.jsx(j,{className:(0,T.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));M.displayName=j.displayName;let $=o.forwardRef(({className:e,...t},a)=>(0,r.jsxs)(v,{children:[r.jsx(M,{}),r.jsx(D,{ref:a,className:(0,T.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));$.displayName=D.displayName;let F=({className:e,...t})=>r.jsx("div",{className:(0,T.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});F.displayName="AlertDialogHeader";let O=({className:e,...t})=>r.jsx("div",{className:(0,T.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});O.displayName="AlertDialogFooter";let Z=o.forwardRef(({className:e,...t},a)=>r.jsx(R,{ref:a,className:(0,T.cn)("text-lg font-semibold",e),...t}));Z.displayName=R.displayName;let L=o.forwardRef(({className:e,...t},a)=>r.jsx(_,{ref:a,className:(0,T.cn)("text-sm text-muted-foreground",e),...t}));L.displayName=_.displayName;let B=o.forwardRef(({className:e,...t},a)=>r.jsx(z,{ref:a,className:(0,T.cn)((0,s.d)(),e),...t}));B.displayName=z.displayName;let V=o.forwardRef(({className:e,...t},a)=>r.jsx(S,{ref:a,className:(0,T.cn)((0,s.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));function q({id:e}){let t=(0,i.useRouter)(),[a,d]=(0,o.useState)(!1);async function c(){d(!0);try{if(!(await fetch(`/api/properties/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete property");n.Am.success("Property deleted"),t.refresh()}catch{n.Am.error("Failed to delete property")}finally{d(!1)}}return(0,r.jsxs)(y,{children:[r.jsx(b,{asChild:!0,children:r.jsx(s.z,{variant:"ghost",size:"icon",className:"text-destructive",disabled:a,children:r.jsx(l,{className:"h-4 w-4"})})}),(0,r.jsxs)($,{children:[(0,r.jsxs)(F,{children:[r.jsx(Z,{children:"Are you absolutely sure?"}),r.jsx(L,{children:"This action cannot be undone. This will permanently delete your property listing."})]}),(0,r.jsxs)(O,{children:[r.jsx(V,{children:"Cancel"}),r.jsx(B,{onClick:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})}V.displayName=S.displayName},21775:(e,t,a)=>{"use strict";a.d(t,{Be:()=>x,Dialog:()=>o,DialogContent:()=>p,DialogHeader:()=>f,DialogTitle:()=>h,DialogTrigger:()=>d,cN:()=>m});var r=a(19899),s=a(5507),l=a(43836),n=a(48449),i=a(66409);let o=l.fC,d=l.xz,c=l.h_;l.x8;let u=s.forwardRef(({className:e,...t},a)=>r.jsx(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=l.aV.displayName;let p=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(c,{children:[r.jsx(u,{}),(0,r.jsxs)(l.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(n.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=l.VY.displayName;let f=({className:e,...t})=>r.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});f.displayName="DialogHeader";let m=({className:e,...t})=>r.jsx("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});m.displayName="DialogFooter";let h=s.forwardRef(({className:e,...t},a)=>r.jsx(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));h.displayName=l.Dx.displayName;let x=s.forwardRef(({className:e,...t},a)=>r.jsx(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=l.dk.displayName},16711:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var r=a(19899),s=a(5507),l=a(66409);let n=s.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));n.displayName="Input"},88455:(e,t,a)=>{"use strict";a.d(t,{Label:()=>d});var r=a(19899),s=a(5507),l=a(10883),n=a(51138),i=a(66409);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},a)=>r.jsx(l.f,{ref:a,className:(0,i.cn)(o(),e),...t}));d.displayName=l.f.displayName},12577:(e,t,a)=>{"use strict";a.d(t,{Bw:()=>h,Ph:()=>c,Ql:()=>x,i4:()=>p,ki:()=>u});var r=a(19899),s=a(5507),l=a(11353),n=a(41963),i=a(30467),o=a(65359),d=a(66409);let c=l.fC;l.ZA;let u=l.B4,p=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(l.JO,{asChild:!0,children:r.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.xz.displayName;let f=s.forwardRef(({className:e,...t},a)=>r.jsx(l.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(i.Z,{className:"h-4 w-4"})}));f.displayName=l.u_.displayName;let m=s.forwardRef(({className:e,...t},a)=>r.jsx(l.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=l.$G.displayName;let h=s.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>r.jsx(l.h_,{children:(0,r.jsxs)(l.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(f,{}),r.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(m,{})]})}));h.displayName=l.VY.displayName,s.forwardRef(({className:e,...t},a)=>r.jsx(l.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=l.__.displayName;let x=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(l.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(l.eT,{children:t})]}));x.displayName=l.ck.displayName,s.forwardRef(({className:e,...t},a)=>r.jsx(l.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=l.Z0.displayName},32979:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(61278).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},28629:(e,t,a)=>{"use strict";a.r(t),a.d(t,{completePropertyDeal:()=>i,getAgentAnalytics:()=>o});var r=a(3626);a(40425);var s=a(70906),l=a(8634),n=a(4535);async function i(e){let t=await (0,s.I8)();if(!t||!t.user||"AGENT"!==t.user.role&&"ADMIN"!==t.user.role)throw Error("Unauthorized");let a=e.get("propertyId"),r=parseFloat(e.get("amount")),i=e.get("type");if(!a||isNaN(r))throw Error("Invalid deal information");let o=await l.db.property.findUnique({where:{id:a}});if(!o||o.ownerId!==t.user.id)throw Error("Property not found or access denied");await l.db.$transaction([l.db.transactionLog.create({data:{propertyId:a,agentId:t.user.id,amount:r,type:i}}),l.db.property.update({where:{id:a},data:{status:"SALE"===i?"SOLD":"RENTED"}})]),(0,n.revalidatePath)("/agent/properties"),(0,n.revalidatePath)("/agent"),(0,n.revalidatePath)("/agent/analytics")}async function o(){let e=await (0,s.I8)();if(!e||!e.user||"AGENT"!==e.user.role&&"ADMIN"!==e.user.role)throw Error("Unauthorized");let t=e.user.id,[a,r,n]=await Promise.all([l.db.transactionLog.findMany({where:{agentId:t},orderBy:{createdAt:"desc"}}),l.db.inquiry.count({where:{property:{ownerId:t}}}),l.db.property.count({where:{ownerId:t}})]),i=a.reduce((e,t)=>e+Number(t.amount),0),o=await l.db.inquiry.findMany({where:{property:{ownerId:t}},orderBy:{createdAt:"desc"},take:10,include:{property:{select:{title:!0}}}}),d=new Date;d.getFullYear(),d.getMonth();let c=[];for(let e=0;e<6;e++){let t=new Date(d.getFullYear(),d.getMonth()-5+e,1),r=new Date(d.getFullYear(),d.getMonth()-5+e+1,0),s=a.filter(e=>e.createdAt>=t&&e.createdAt<=r).reduce((e,t)=>e+Number(t.amount),0);c.push({month:t.toLocaleString("default",{month:"short"}),revenue:s})}return{totalRevenue:i,transactionCount:a.length,inquiryCount:r,propertyCount:n,recentInquiries:JSON.parse(JSON.stringify(o)),monthlyData:c,recentTransactions:a.slice(0,5).map(e=>({...e,amount:Number(e.amount),createdAt:e.createdAt.toISOString()}))}}(0,a(12740).h)([i,o]),(0,r.j)("675446e0e49d0fd64ba83fd62071323d39a5833f",i),(0,r.j)("8c299936c13335b79ecadd4eef4c4ae4748a42e4",o)},1158:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(35023),s=a(72783),l=a(9620),n=a(43722),i=a(17556);let o=(0,a(64277).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var d=a(2772);let c=(0,d.createProxy)(String.raw`C:\Users\kirika\.gemini\antigravity\scratch\real-estate-platform\frontend\components\delete-property-button.tsx#DeletePropertyButton`);var u=a(10682);let p=(0,d.createProxy)(String.raw`C:\Users\kirika\.gemini\antigravity\scratch\real-estate-platform\frontend\components\complete-deal-button.tsx#CompleteDealButton`);var f=a(42638),m=a(24960);async function h(){let e=await (0,s.I8)(),t=await l.db.property.findMany({where:{ownerId:e?.user?.id},orderBy:{createdAt:"desc"}});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"My Properties"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your listed properties."})]}),r.jsx(n.z,{asChild:!0,children:(0,r.jsxs)(u.default,{href:"/agent/properties/new",children:[r.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"Add Property"]})})]}),(0,r.jsxs)("div",{className:"border rounded-md",children:[(0,r.jsxs)(f.iA,{children:[r.jsx(f.xD,{children:(0,r.jsxs)(f.SC,{children:[r.jsx(f.ss,{children:"Title"}),r.jsx(f.ss,{children:"Location"}),r.jsx(f.ss,{children:"Price"}),r.jsx(f.ss,{children:"Status"}),r.jsx(f.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(f.RM,{children:t.map(e=>(0,r.jsxs)(f.SC,{children:[r.jsx(f.pj,{className:"font-medium",children:e.title}),r.jsx(f.pj,{children:e.location}),r.jsx(f.pj,{children:(0,m.x)(Number(e.price))}),r.jsx(f.pj,{children:r.jsx("span",{className:"capitalize",children:e.status.toLowerCase()})}),r.jsx(f.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:["AVAILABLE"===e.status&&r.jsx(p,{propertyId:e.id,propertyTitle:e.title,defaultPrice:Number(e.price)}),r.jsx(n.z,{variant:"ghost",size:"icon",asChild:!0,children:r.jsx(u.default,{href:`/agent/properties/${e.id}`,children:r.jsx(o,{className:"h-4 w-4"})})}),r.jsx(c,{id:e.id})]})})]},e.id))})]}),0===t.length&&r.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"No properties found. List your first property today!"})]})]})}},43722:(e,t,a)=>{"use strict";a.d(t,{z:()=>d});var r=a(35023),s=a(58003),l=a(62866),n=a(50220),i=a(24960);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},d)=>{let c=s?l.g7:"button";return r.jsx(c,{className:(0,i.cn)(o({variant:t,size:a,className:e})),ref:d,...n})});d.displayName="Button"},42638:(e,t,a)=>{"use strict";a.d(t,{RM:()=>o,SC:()=>d,iA:()=>n,pj:()=>u,ss:()=>c,xD:()=>i});var r=a(35023),s=a(58003),l=a(24960);let n=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let o=s.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",s.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=s.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",s.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},24960:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l,x:()=>n});var r=a(23779),s=a(45365);function l(...e){return(0,s.m6)((0,r.W)(e))}function n(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",maximumFractionDigits:0}).format(e)}},64277:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(58003);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:n,iconNode:c,...u},p)=>(0,r.createElement)("svg",{ref:p,...d,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:i("lucide",l),...!n&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...l},o)=>(0,r.createElement)(c,{ref:o,iconNode:t,className:i(`lucide-${s(n(e))}`,`lucide-${e}`,a),...l}));return a.displayName=n(e),a}},17556:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(64277).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},62866:(e,t,a)=>{"use strict";a.d(t,{g7:()=>c});var r=a(58003),s=a.t(r,2);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var n=a(35023),i=Symbol.for("react.lazy"),o=s[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(d(a)&&"function"==typeof o&&(a=o(a._payload)),r.isValidElement(a)){var n;let e,i;let o=(n=a,(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref),d=function(e,t){let a={...t};for(let r in t){let s=e[r],l=t[r];/^on[A-Z]/.test(r)?s&&l?a[r]=(...e)=>{let t=l(...e);return s(...e),t}:s&&(a[r]=s):"style"===r?a[r]={...s,...l}:"className"===r&&(a[r]=[s,l].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==r.Fragment&&(d.ref=t?function(...e){return t=>{let a=!1,r=e.map(e=>{let r=l(e,t);return a||"function"!=typeof r||(a=!0),r});if(a)return()=>{for(let t=0;t<r.length;t++){let a=r[t];"function"==typeof a?a():l(e[t],null)}}}}(t,o):o),r.cloneElement(a,d)}return r.Children.count(a)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=r.forwardRef((e,a)=>{let{children:s,...l}=e;d(s)&&"function"==typeof o&&(s=o(s._payload));let i=r.Children.toArray(s),c=i.find(p);if(c){let e=c.props.children,s=i.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...l,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,n.jsx)(t,{...l,ref:a,children:s})});return a.displayName=`${e}.Slot`,a}("Slot"),u=Symbol("radix.slottable");function p(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}},50220:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var r=a(23779);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.W,n=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return l(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(e=>{let t=null==a?void 0:a[e],r=null==i?void 0:i[e];if(null===t)return null;let l=s(t)||s(r);return n[e][l]}),d=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return l(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...d}[t]):({...i,...d})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[916,2854,6401,9295,6914,1239,5616,9189,1299,2294,2759,4824,811,995],()=>a(10502));module.exports=r})();