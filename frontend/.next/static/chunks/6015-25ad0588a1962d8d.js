(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6015],{6015:function(e,r,t){Promise.resolve().then(t.bind(t,7535)),Promise.resolve().then(t.bind(t,3219))},7535:function(e,r,t){"use strict";t.d(r,{PropertyForm:function(){return h}});var n=t(7821),s=t(746),o=t(4089),i=t(6447);let a=i.Ryn({title:i.Z_8().min(5),description:i.Z_8().min(10),price:i.oQ2.number().positive(),location:i.Z_8().min(2),type:i.Z_8().min(1),status:i.Z_8().default("AVAILABLE"),bedrooms:i.oQ2.number().int().nonnegative(),bathrooms:i.oQ2.number().int().nonnegative(),area:i.oQ2.number().positive(),features:i.Z_8().default("")});var l=t(7469),d=t(1676),c=t(7002),u=t(6225),f=t(1027),m=t(4680),p=t(8504),x=t(8078);function h(e){var r,t,i;let{initialData:h}=e,j=(0,p.useRouter)(),[b,g]=(0,x.useState)(!1),y=(0,s.cI)({resolver:(0,o.F)(a),defaultValues:h?{title:h.title,description:h.description,price:Number(h.price),location:h.location,type:h.type,status:h.status,bedrooms:null!==(r=h.bedrooms)&&void 0!==r?r:0,bathrooms:null!==(t=h.bathrooms)&&void 0!==t?t:0,area:null!==(i=h.area)&&void 0!==i?i:0,features:h.features}:{title:"",description:"",price:0,location:"",type:"SALE",status:"AVAILABLE",bedrooms:0,bathrooms:0,area:0,features:""}});async function v(e){g(!0);try{if(!(await fetch(h?"/api/properties/".concat(h.id):"/api/properties",{method:h?"PATCH":"POST",body:JSON.stringify({...e}),headers:{"Content-Type":"application/json"}})).ok)throw Error("Something went wrong");m.Am.success(h?"Property updated":"Property created"),j.push("/agent/properties"),j.refresh()}catch(e){m.Am.error("Failed to save property")}finally{g(!1)}}return(0,n.jsx)(d.l0,{...y,children:(0,n.jsxs)("form",{onSubmit:y.handleSubmit(v),className:"space-y-8 max-w-2xl",children:[(0,n.jsx)(d.Wi,{control:y.control,name:"title",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Title"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Luxurious Beachfront Villa",...r})}),(0,n.jsx)(d.pf,{children:"The main display name for your property."}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)(d.Wi,{control:y.control,name:"type",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Process Type"}),(0,n.jsxs)(f.Ph,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,n.jsx)(d.NI,{children:(0,n.jsx)(f.i4,{children:(0,n.jsx)(f.ki,{placeholder:"Select type"})})}),(0,n.jsxs)(f.Bw,{children:[(0,n.jsx)(f.Ql,{value:"SALE",children:"For Sale"}),(0,n.jsx)(f.Ql,{value:"RENT",children:"For Rent"}),(0,n.jsx)(f.Ql,{value:"COMMERCIAL",children:"Commercial"}),(0,n.jsx)(f.Ql,{value:"LAND",children:"Land"})]})]}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:y.control,name:"price",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Price ($)"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"number",...r})}),(0,n.jsx)(d.zG,{})]})}})]}),(0,n.jsx)(d.Wi,{control:y.control,name:"location",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Location"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Dubai Marina, UAE",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:y.control,name:"description",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Description"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(u.g,{placeholder:"Tell potential buyers about your property...",className:"min-h-[120px]",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsx)(d.Wi,{control:y.control,name:"bedrooms",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Bedrooms"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"number",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:y.control,name:"bathrooms",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Bathrooms"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"number",...r})}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(d.Wi,{control:y.control,name:"area",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Area (Sq Ft)"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{type:"number",...r})}),(0,n.jsx)(d.zG,{})]})}})]}),(0,n.jsx)(d.Wi,{control:y.control,name:"features",render:e=>{let{field:r}=e;return(0,n.jsxs)(d.xJ,{children:[(0,n.jsx)(d.lX,{children:"Features (Comma separated)"}),(0,n.jsx)(d.NI,{children:(0,n.jsx)(c.I,{placeholder:"Pool, Gym, Parking, WiFi",...r})}),(0,n.jsx)(d.pf,{children:"Add highlights of the property."}),(0,n.jsx)(d.zG,{})]})}}),(0,n.jsx)(l.z,{type:"submit",size:"lg",disabled:b,children:b?"Saving...":h?"Update Property":"Publish Property"})]})})}},7469:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return d}});var n=t(7821),s=t(8078),o=t(7035),i=t(898),a=t(3892);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,u=d?o.g7:"button";return(0,n.jsx)(u,{className:(0,a.cn)(l({variant:s,size:i,className:t})),ref:r,...c})});d.displayName="Button"},1676:function(e,r,t){"use strict";t.d(r,{NI:function(){return h},Wi:function(){return u},l0:function(){return d},lX:function(){return x},pf:function(){return j},xJ:function(){return p},zG:function(){return b}});var n=t(7821),s=t(8078),o=t(7035),i=t(746),a=t(3892),l=t(1270);let d=i.RV,c=s.createContext({}),u=e=>{let{...r}=e;return(0,n.jsx)(c.Provider,{value:{name:r.name},children:(0,n.jsx)(i.Qr,{...r})})},f=()=>{let e=s.useContext(c),r=s.useContext(m),{getFieldState:t,formState:n}=(0,i.Gc)(),o=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...o}},m=s.createContext({}),p=s.forwardRef((e,r)=>{let{className:t,...o}=e,i=s.useId();return(0,n.jsx)(m.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:r,className:(0,a.cn)("space-y-2",t),...o})})});p.displayName="FormItem";let x=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:o,formItemId:i}=f();return(0,n.jsx)(l.Label,{ref:r,className:(0,a.cn)(o&&"text-destructive",t),htmlFor:i,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:i,formDescriptionId:a,formMessageId:l}=f();return(0,n.jsx)(o.g7,{ref:r,id:i,"aria-describedby":s?"".concat(a," ").concat(l):"".concat(a),"aria-invalid":!!s,...t})});h.displayName="FormControl";let j=s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:o}=f();return(0,n.jsx)("p",{ref:r,id:o,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});j.displayName="FormDescription";let b=s.forwardRef((e,r)=>{let{className:t,children:s,...o}=e,{error:i,formMessageId:l}=f(),d=i?String(null==i?void 0:i.message):s;return d?(0,n.jsx)("p",{ref:r,id:l,className:(0,a.cn)("text-sm font-medium text-destructive",t),...o,children:d}):null});b.displayName="FormMessage"},7002:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var n=t(7821),s=t(8078),o=t(3892);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},1270:function(e,r,t){"use strict";t.d(r,{Label:function(){return d}});var n=t(7821),s=t(8078),o=t(5641),i=t(898),a=t(3892);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.f,{ref:r,className:(0,a.cn)(l(),t),...s})});d.displayName=o.f.displayName},1027:function(e,r,t){"use strict";t.d(r,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return h},i4:function(){return f},ki:function(){return u}});var n=t(7821),s=t(8078),o=t(9606),i=t(4713),a=t(8134),l=t(8149),d=t(3892);let c=o.fC;o.ZA;let u=o.B4,f=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e;return(0,n.jsxs)(o.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,(0,n.jsx)(o.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=o.xz.displayName;let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.u_,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(a.Z,{className:"h-4 w-4"})})});m.displayName=o.u_.displayName;let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.$G,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=o.$G.displayName;let x=s.forwardRef((e,r)=>{let{className:t,children:s,position:i="popper",...a}=e;return(0,n.jsx)(o.h_,{children:(0,n.jsxs)(o.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...a,children:[(0,n.jsx)(m,{}),(0,n.jsx)(o.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(p,{})]})})});x.displayName=o.VY.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.__,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=o.__.displayName;let h=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,n.jsxs)(o.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(o.eT,{children:s})]})});h.displayName=o.ck.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=o.Z0.displayName},3219:function(e,r,t){"use strict";t.d(r,{Separator:function(){return c}});var n=t(7821),s=t(8078),o=t(3184),i="horizontal",a=["horizontal","vertical"],l=s.forwardRef((e,r)=>{let{decorative:t,orientation:s=i,...l}=e,d=a.includes(s)?s:i;return(0,n.jsx)(o.WV.div,{"data-orientation":d,...t?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...l,ref:r})});l.displayName="Separator";var d=t(3892);let c=s.forwardRef((e,r)=>{let{className:t,orientation:s="horizontal",decorative:o=!0,...i}=e;return(0,n.jsx)(l,{ref:r,decorative:o,orientation:s,className:(0,d.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...i})});c.displayName=l.displayName},6225:function(e,r,t){"use strict";t.d(r,{g:function(){return i}});var n=t(7821),s=t(8078),o=t(3892);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s})});i.displayName="Textarea"},3892:function(e,r,t){"use strict";t.d(r,{cn:function(){return o},x:function(){return i}});var n=t(2605),s=t(1638);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}function i(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",maximumFractionDigits:0}).format(e)}}}]);